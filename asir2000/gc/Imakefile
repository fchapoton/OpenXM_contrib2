/*
 * Copyright (c) 1994-2000 FUJITSU LABORATORIES LIMITED 
 * All rights reserved.  
 *
 * $OpenXM: OpenXM_contrib2/asir2000/gc/Imakefile,v 1.6 2000/08/22 01:30:24 noro Exp $
 */
#include "../include/Risa.tmpl"

CFLAGS= $(DEFINES) $(CDEBUGFLAGS) -DSILENT -DLARGE_CONFIG -DALL_INTERIOR_POINTERS -DHEAP_START_ADDR=0x$(HEAP_START_ADDR)

OBJS= alloc.o reclaim.o allchblk.o misc.o mach_dep.o os_dep.o mark_rts.o headers.o mark.o obj_map.o blacklst.o finalize.o new_hblk.o dbg_mlc.o malloc.o mallocx.o stubborn.o solaris_threads.o typd_mlc.o ptr_chck.o dyn_load.o gc_risa.o

SRCS= alloc.c reclaim.c allchblk.c misc.c mach_dep.c os_dep.c mark_rts.c headers.c mark.c obj_map.c blacklst.c finalize.c new_hblk.c dbg_mlc.c malloc.c mallocx.c stubborn.c solaris_threads.c typd_mlc.c ptr_chck.c dyn_load.c gc_risa.c

NormalLibraryTarget(asir-gc,$(OBJS))
DependTarget()

#if defined(AlphaArchitecture)
mark_rts.o:
	$(CC) -c $(CFLAGS) -Wo,-notail mark_rts.c
#else
#if defined(mips) || defined(MipsArchitecture)
mach_dep.o: mips_mach_dep.s
	as -n32 -mips3 -o mach_dep.o mips_mach_dep.s
#else
#if defined(_IBMR2)
mach_dep.o: rs6000_mach_dep.s
	as -o mach_dep.o rs6000_mach_dep.s
#else
mach_dep.o: mach_dep.c
	$(CC) -c mach_dep.c
#endif
#endif
#endif

os_dep.o: $(TOP)/include/Risa.tmpl

install-include::
	MakeDir($(GC_INCDIR))
	-$(CP) gc*.h $(GC_INCDIR)

